{"version":3,"sources":["api.js","App.js","index.js"],"names":["DB","resourceId","startDate","endDate","tonns","weekend","moment","require","App","finalDB","allDaysDB","formatTheDate","date","format","split","reverse","join","forEach","object","datesArray","dateArray","currentDate","stopDate","push","add","getDates","daysCount","totalTonns","fullWeekArray","fiveDaysWeekArray","filterDatesArray","filter","includes","map","length","Number","toFixed","Object","assign","mapWithoutRecurringDates","Map","entry","currentObj","id","has","get","set","Array","from","values","console","log","className","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"+LAAaA,G,MAAK,CAChB,CACEC,WAAY,MACZC,UAAW,aACXC,QAAS,aACTC,MAAO,IACPC,SAAS,GAEX,CACEJ,WAAY,MACZC,UAAW,aACXC,QAAS,aACTC,MAAO,GACPC,SAAS,GAEX,CACEJ,WAAY,MACZC,UAAW,aACXC,QAAS,aACTC,MAAO,GACPC,SAAS,GAEX,CACEJ,WAAY,MACZC,UAAW,aACXC,QAAS,aACTC,MAAO,IACPC,SAAS,GAEX,CACEJ,WAAY,MACZC,UAAW,aACXC,QAAS,aACTC,MAAO,GACPC,SAAS,GAEX,CACEJ,WAAY,MACZC,UAAW,aACXC,QAAS,aACTC,MAAO,GACPC,SAAS,K,OCtCPC,EAASC,EAAQ,IA6GRC,MA3Gf,WACE,IACIC,EADAC,EAAY,GAGVC,EAAgB,SAASC,GAC7B,OAAON,IACNO,OAAOD,GACPE,MAAM,KACNC,UACAC,KAAK,MAgBRhB,EAAGiB,SAAQ,SAAAC,GACT,IAEMC,EAhBS,SAASjB,EAAWC,GAKnC,IAJA,IAAIiB,EAAY,GACZC,EAAcf,EAAOJ,GACnBoB,EAAWhB,EAAOH,GAEjBkB,GAAeC,GAClBF,EAAUG,KAAMjB,EAAOe,GAAaR,OAAO,oBAC3CQ,EAAcf,EAAOe,GAAaG,IAAI,EAAG,QAE7C,OAAOJ,EAOYK,CAFDd,EAAcO,EAAOhB,WACvBS,EAAcO,EAAOf,UAEjCuB,EAAY,EACVC,EAAaT,EAAOd,MACtBwB,EAAgB,GAChBC,EAAoB,GAExB,IAAIX,EAAOb,QAAS,CAClB,IAAMyB,EAAmBX,EACtBY,QAAO,SAAAnB,GAAI,QAAMA,EAAKoB,SAAS,WAAapB,EAAKoB,SAAS,gBAE7DH,EAAoBC,EAAiBG,KAAI,SAAArB,GAMvC,OALAc,EAAYI,EAAiBI,OAC7BhB,EAAOhB,UAAYU,EACnBM,EAAOf,QAAUS,EACjBM,EAAOd,MAAQ+B,QAAQR,EAAaD,GAAWU,QAAQ,IAEhDC,OAAOC,OAAO,GAAIpB,MAG3BR,EAAS,sBAAOA,GAAP,YAAqBmB,IAG7BX,EAAOb,UACRuB,EAAgBT,EAAWc,KAAI,SAAArB,GAM7B,OALAc,EAAYP,EAAWe,OACvBhB,EAAOhB,UAAYU,EACnBM,EAAOf,QAAUS,EACjBM,EAAOd,MAAQ+B,QAAQR,EAAaD,GAAWU,QAAQ,IAEhDC,OAAOC,OAAO,GAAIpB,MAG3BR,EAAS,sBAAOA,GAAP,YAAqBkB,QAIlC,IAAMW,EAA2B,IAAIC,IAoCrC,OAlCA9B,EAAUO,SAAQ,SAAAwB,GAChB,IAAMC,EAAU,eAAOD,GACjBE,EAAE,UAAMD,EAAWxC,UAAjB,YAA8BwC,EAAWzC,YAE9CsC,EAAyBK,IAAID,KAC9BD,EAAWtC,OAASmC,EAAyBM,IAAIF,GAAIvC,OAGvDmC,EAAyBO,IAAIH,EAAID,MAGnCjC,EAAUsC,MAAMC,KAAKT,EAAyBU,UAqB9CC,QAAQC,IAAI1C,GAGV,qBAAK2C,UAAU,MAAf,SACE,4CCvGNC,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,EAAD,MAEFC,SAASC,eAAe,W","file":"static/js/main.9bdf2bdf.chunk.js","sourcesContent":["export const DB = [\n  {\n    resourceId: \"DOR\",\n    startDate: \"01/01/2021\",\n    endDate: \"10/01/2021\",\n    tonns: 110,\n    weekend: false,\n  },\n  {\n    resourceId: \"DOR\",\n    startDate: \"05/01/2021\",\n    endDate: \"10/01/2021\",\n    tonns: 60,\n    weekend: false,\n  },\n  {\n    resourceId: \"DOR\",\n    startDate: \"15/01/2021\",\n    endDate: \"20/01/2021\",\n    tonns: 60,\n    weekend: false,\n  },\n  {\n    resourceId: \"VAN\",\n    startDate: \"01/01/2021\",\n    endDate: \"10/01/2021\",\n    tonns: 110,\n    weekend: true,\n  },\n  {\n    resourceId: \"VAN\",\n    startDate: \"05/01/2021\",\n    endDate: \"10/01/2021\",\n    tonns: 60,\n    weekend: true,\n  },\n  {\n    resourceId: \"VAN\",\n    startDate: \"15/01/2021\",\n    endDate: \"20/01/2021\",\n    tonns: 60,\n    weekend: true,\n  },\n];","import React from 'react';\nimport 'App.scss';\nimport { DB } from './api';\nconst moment = require('moment');\n\nfunction App() {\n  let allDaysDB = [];\n  let finalDB = [];\n\n  const formatTheDate = function(date) {\n    return moment()\n    .format(date)\n    .split('/')\n    .reverse()\n    .join('-');\n  }\n\n  const getDates = function(startDate, endDate) {\n    let dateArray = [];\n    let currentDate = moment(startDate);\n    const stopDate = moment(endDate);\n\n    while (currentDate <= stopDate) {\n        dateArray.push( moment(currentDate).format('YYYY-MM-DD dddd') )\n        currentDate = moment(currentDate).add(1, 'days');\n    }\n    return dateArray;\n  }\n\n\n  DB.forEach(object => {\n    const startDate = formatTheDate(object.startDate);\n    const endDate = formatTheDate(object.endDate);\n    const datesArray = getDates(startDate, endDate);\n    let daysCount = 0;\n    const totalTonns = object.tonns;\n    let fullWeekArray = [];\n    let fiveDaysWeekArray = [];\n\n    if(!object.weekend) {\n      const filterDatesArray = datesArray\n        .filter(date => !(date.includes('Sunday') || date.includes('Saturday')));\n      \n      fiveDaysWeekArray = filterDatesArray.map(date => {\n        daysCount = filterDatesArray.length;\n        object.startDate = date;\n        object.endDate = date;\n        object.tonns = Number((totalTonns / daysCount).toFixed(2));\n        \n        return Object.assign({}, object)\n      })\n\n      allDaysDB = [...allDaysDB, ...fiveDaysWeekArray]\n    }\n\n    if(object.weekend) {\n      fullWeekArray = datesArray.map(date => {\n        daysCount = datesArray.length;\n        object.startDate = date;\n        object.endDate = date;\n        object.tonns = Number((totalTonns / daysCount).toFixed(2));\n\n        return Object.assign({}, object)\n      })\n\n      allDaysDB = [...allDaysDB, ...fullWeekArray]\n    }\n  });\n\n  const mapWithoutRecurringDates = new Map();\n\n  allDaysDB.forEach(entry => {\n    const currentObj = {...entry}\n    const id = `${currentObj.startDate} ${currentObj.resourceId}`;\n    \n    if(mapWithoutRecurringDates.has(id)) {\n      currentObj.tonns += mapWithoutRecurringDates.get(id).tonns;\n    } \n\n    mapWithoutRecurringDates.set(id, currentObj);\n  })\n\n  finalDB = Array.from(mapWithoutRecurringDates.values());\n\n  //---------solution with Object-------------------\n\n  // const objectWithoutRecurringDates = {};\n\n  // allDaysDB.forEach(entry => {\n  //   const currentObj = {...entry}\n  //   const id = `${currentObj.startDate} ${currentObj.resourceId}`;\n\n  //   if(objectWithoutRecurringDates.hasOwnProperty(id)) {\n  //     currentObj.tonns += objectWithoutRecurringDates[id].tonns;\n  //   }\n    \n  //   objectWithoutRecurringDates[id] = currentObj;\n  // })\n\n  // finalDB = Object.values(objectWithoutRecurringDates);\n\n  //---------solution with Object-------------------\n\n  console.log(finalDB);\n\n  return (\n    <div className=\"App\">\n      <h1>Objects</h1>\n    </div>\n  );\n}\n\nexport default App;\n\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from 'App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n"],"sourceRoot":""}